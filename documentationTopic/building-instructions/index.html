<h3 id="building-with-ocaml">Building with OCaml</h3>

<p>We use the following versions of the compiler/packages in order to build the <code class="highlighter-rouge">fix-engine</code> code with OCaml:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">OCaml version 4.01.0
<span class="nv">lwt</span><span class="o">=</span>2.6.0
<span class="nv">yojson</span><span class="o">=</span>1.3
<span class="nv">topkg</span><span class="o">=</span>0.9
topkg-care<span class="o">=</span>0.9</code></pre></figure>

<p>Currently, the  <code class="highlighter-rouge">fix-engine</code> repository contains two sets of application level messages: the folders <code class="highlighter-rouge">src-protocol-exts</code> and <code class="highlighter-rouge">src-protocol-exts-pp</code> are DSL-generated and contain all the application-level FIX messages that are present in the FIX specification. Folders <code class="highlighter-rouge">src-protocol-exts-vg</code> and <code class="highlighter-rouge">src-protocol-exts-pp-vg</code> are hand-written and contain a small subset of FIX messages – those are used in VGs and examples.</p>

<p>In order to build the code with the “full” set of messages, just type <code class="highlighter-rouge">make</code>. To build with “VGs-compatible” messages, do <code class="highlighter-rouge">make build_vgs</code>.</p>
<h3 id="testing-with-quickfixjbanzai-client">Testing with quickfixj/banzai client</h3>

<p>The sever executable is built only with the “full” message set. You can start the server with</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">make run_server</code></pre></figure>

<p>The server is listening on port 9880 in the acceptor mode, the default <code class="highlighter-rouge">SenderCompID</code> value is <code class="highlighter-rouge">IMANDRA</code> and the default value for <code class="highlighter-rouge">TargetCompID</code> is <code class="highlighter-rouge">BANZAI</code>.</p>

<p>One can test the server with a “banzai” example client from the QuickfixJ software. Here’s how to checkout and build the QuickfixJ code</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">git clone https://github.com/quickfix-j/quickfixj.git
<span class="nb">cd </span>quickfixj/
git checkout QFJ_1_6_x
vim quickfixj-examples/banzai/src/main/resources/quickfix/examples/banzai/banzai.cfg</code></pre></figure>

<p>Edit the banzai.cfg file, so it looks like this:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">[</span>default]
<span class="nv">FileStorePath</span><span class="o">=</span>target/data/banzai
<span class="nv">ConnectionType</span><span class="o">=</span>initiator
<span class="nv">SenderCompID</span><span class="o">=</span>BANZAI
<span class="nv">TargetCompID</span><span class="o">=</span>IMANDRA
<span class="nv">SocketConnectHost</span><span class="o">=</span>localhost
<span class="nv">StartTime</span><span class="o">=</span>00:00:00
<span class="nv">EndTime</span><span class="o">=</span>00:00:00
<span class="nv">HeartBtInt</span><span class="o">=</span>30
<span class="nv">ReconnectInterval</span><span class="o">=</span>60

<span class="o">[</span>session]
<span class="nv">BeginString</span><span class="o">=</span>FIX.4.4
<span class="nv">SocketConnectPort</span><span class="o">=</span>9880</code></pre></figure>

<p>We build the code with maven (running the test suite takes a lot of time, so we skip it):</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">mvn install <span class="nt">-DskipTests</span>  </code></pre></figure>

<p>Finally, we can start the client with:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">java <span class="nt">-jar</span> quickfixj-examples/banzai/target/quickfixj-examples-banzai-1.6.4-SNAPSHOT-standalone.jar</code></pre></figure>
